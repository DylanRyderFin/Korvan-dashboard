<!-- All previous HTML remains the same up to the <body> tag -->

<body>
  <!-- Sidebar, Login, Dashboard ... all remain unchanged -->

  <!-- ✅ REMOVED: Name Prompt Modal -->

  <script>
    function updateDashboard() {
      document.getElementById('debt-amount').textContent = "$124.80";
      const messages = [
        "You're only useful on your knees, aren't you, puppy?",
        "Every breath you take is mine. Every edge? My control.",
        "You don’t even think anymore. Just obey, dumb muscle toy.",
      ];
      const msg = messages[Math.floor(Math.random() * messages.length)];
      document.getElementById("daily-message").textContent = msg;
    }

    function sendMessage() {
      const input = document.getElementById('user-input');
      const log = document.getElementById('chat-log');
      const userMsg = input.value.trim();
      if (!userMsg) return;
      log.innerHTML += `<div><strong>You:</strong> ${userMsg}</div>`;
      input.value = '';
      log.scrollTop = log.scrollHeight;
    }

    document.getElementById('signup-btn').onclick = async () => {
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      try {
        await createUserWithEmailAndPassword(auth, email, password);
        // No name prompt anymore
      } catch (error) {
        document.getElementById('login-message').textContent = error.message;
      }
    };

    function showDashboard() {
      document.getElementById('login-section').style.display = 'none';
      document.getElementById('dashboard').style.display = 'block';
      updateDashboard();
    }

    function showLogin() {
      document.getElementById('login-section').style.display = 'block';
      document.getElementById('dashboard').style.display = 'none';
    }

    onAuthStateChanged(auth, async (user) => {
      if (user) {
        const userDocRef = doc(db, "users", user.uid);
        const docSnap = await getDoc(userDocRef);
        let name = "Andrew";
        if (docSnap.exists()) {
          const userData = docSnap.data();
          name = userData.name || name;
        }
        document.getElementById('display-name').textContent = name;
        document.getElementById('profile-name').textContent = name;
        showDashboard();
      } else {
        showLogin();
      }
    });
  </script>
</body>
</html>

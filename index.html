<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fag Hub</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #121212;
      color: white;
    }
    .login-container, .dashboard, #pageBuilder {
      display: none;
    }
    .login-container.active, .dashboard.active, #pageBuilder.active {
      display: block;
    }
    .login-box {
      max-width: 300px;
      margin: 100px auto;
      padding: 20px;
      background: #1e1e1e;
      border: 2px solid #ff69b4;
      border-radius: 10px;
      text-align: center;
    }
    input, textarea {
      padding: 8px;
      margin: 5px 0;
      width: 90%;
      background: #111;
      color: white;
      border: 1px solid #ff69b4;
      border-radius: 5px;
    }
    button {
      padding: 8px 12px;
      background: #ff69b4;
      border: none;
      color: white;
      cursor: pointer;
      margin-top: 10px;
      border-radius: 5px;
    }
    .sidebar {
      position: fixed;
      width: 200px;
      height: 100%;
      background: #1e1e1e;
      top: 0;
      left: 0;
      padding-top: 20px;
      border-right: 2px solid #ff69b4;
    }
    .sidebar a {
      display: block;
      padding: 10px;
      color: white;
      text-decoration: none;
    }
    .sidebar a:hover {
      background: #333;
    }
    .main-content {
      margin-left: 210px;
      padding: 20px;
    }
    .section {
      border: 1px dashed #ff69b4;
      padding: 10px;
      margin-bottom: 10px;
      background: #1f1f1f;
    }
    #settingsPopup {
      display: none;
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translate(-50%, -20%);
      background: #1e1e1e;
      padding: 20px;
      border: 2px solid #ff69b4;
      z-index: 999;
      width: 300px;
    }
    #settingsPopup textarea, #settingsPopup input {
      width: 100%;
      margin-bottom: 10px;
    }
    #chatInput[disabled] {
      background: #444;
      cursor: not-allowed;
      color: #aaa;
    }
  </style>
</head>
<body>

<div class="login-container active" id="loginContainer">
  <div class="login-box">
    <h2>Login to Fag Hub</h2>
    <input type="text" id="username" placeholder="Username"/><br/>
    <input type="password" id="password" placeholder="Password"/><br/>
    <button onclick="login()">Login</button>
    <p id="loginError" style="color:red;"></p>
  </div>
</div>

<div class="dashboard" id="dashboard">
  <div class="sidebar">
    <a href="#" onclick="showPage('dashboardView')">Dashboard</a>
    <a href="#" onclick="showSettings()">Settings</a>
    <a href="#" onclick="showPageBuilder()" id="pageBuilderLink" style="display:none">Page Builder</a>
    <a href="#" onclick="logout()">Logout</a>
  </div>
  <div class="main-content">
    <div id="dashboardView">
      <h1>Welcome, <span id="displayName"></span></h1>
      <p id="dailyMessage"></p>
      <div class="section" id="debtSection">Debt Price: <span id="debtAmount">$1000</span></div>
      <div class="section" id="profileSection">Profile: <span id="profileInfo">Obedient sub with growing debt</span></div>

      <!-- Chatbox for Dylan only -->
      <div class="section" id="chatSection" style="display:none;">
        <h3>Chatbox</h3>
        <div id="chatLog" style="background:#222; height:100px; overflow-y:auto; margin-bottom:5px;"></div>
        <input type="text" id="chatInput" placeholder="Say something to your dom..." onkeypress="if(event.key==='Enter')sendChat()" />
      </div>
    </div>

    <div id="pageBuilder" style="display:none;">
      <h2>Page Builder</h2>
      <div id="editableSections">
        <div class="section" contenteditable="true">Editable Section 1</div>
        <div class="section" contenteditable="true">Editable Section 2</div>
      </div>
      <button onclick="addSection()">Add Section</button>
      <button onclick="saveChanges('all')">Save to All</button>
      <button onclick="saveChanges('current')">Save to My Account</button>
    </div>
  </div>
</div>

<div id="settingsPopup">
  <h3>Edit Settings</h3>
  <textarea id="editDebt" placeholder="Edit debt amount..."></textarea>
  <textarea id="editProfile" placeholder="Edit profile..."></textarea>
  <input type="password" id="editPassword" placeholder="Change password..."/>
  <button onclick="saveSettings()">Save</button>
  <button onclick="closeSettings()">Close</button>
</div>

<script>
  const users = {
    "Alpha Dylan": { password: "alpha", role: "alpha", kinks: "", profile: "Obedient sub with growing debt" },
    "Andrew": { password: "sub", role: "sub", kinks: "", profile: "Obedient sub with growing debt" }
  };

  let currentUser = null;

  function login() {
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    if (users[username] && users[username].password === password) {
      currentUser = { username, role: users[username].role };
      document.getElementById('loginContainer').classList.remove('active');
      document.getElementById('dashboard').classList.add('active');
      document.getElementById('displayName').innerText = username;
      showDailyMessage();

      // Show chatbox only for Dylan
      if (currentUser.username === 'Alpha Dylan') {
        document.getElementById('chatSection').style.display = 'block';
        document.getElementById('pageBuilderLink').style.display = 'block';
      } else {
        document.getElementById('chatSection').style.display = 'none';
        document.getElementById('pageBuilderLink').style.display = 'none';
        // Disable chat input for others
        document.getElementById('chatInput').disabled = true;
      }
      // Show dashboard and hide other pages initially
      showPage('dashboardView');
    } else {
      document.getElementById('loginError').innerText = "Invalid credentials";
    }
  }

  function logout() {
    currentUser = null;
    document.getElementById('loginContainer').classList.add('active');
    document.getElementById('dashboard').classList.remove('active');
    document.getElementById('pageBuilder').style.display = 'none';
    document.getElementById('pageBuilderLink').style.display = 'none';
    document.getElementById('chatSection').style.display = 'none';
    document.getElementById('chatInput').disabled = false;
  }

  function showDailyMessage() {
    const messages = [
      "You exist to serve, nothing more.",
      "Your worth is defined by your obedience.",
      "Today, youâ€™ll prove your devotion again."
    ];
    document.getElementById('dailyMessage').innerText = messages[Math.floor(Math.random() * messages.length)];
  }

  function showSettings() {
    document.getElementById('editDebt').value = document.getElementById('debtAmount').innerText;
    document.getElementById('editProfile').value = document.getElementById('profileInfo').innerText;
    document.getElementById('editPassword').value = '';
    document.getElementById('settingsPopup').style.display = 'block';

    // Show Page Builder in Settings only for Dylan
    if (currentUser.username === 'Alpha Dylan') {
      document.getElementById('pageBuilder').style.display = 'block';
      showPageBuilder();
    } else {
      document.getElementById('pageBuilder').style.display = 'none';
      showPage('dashboardView');
    }
  }

  function closeSettings() {
    document.getElementById('settingsPopup').style.display = 'none';
  }

  function saveSettings() {
    // Save debt and profile from settings popup
    document.getElementById('debtAmount').innerText = document.getElementById('editDebt').value;
    document.getElementById('profileInfo').innerText = document.getElementById('editProfile').value;

    // Save to users data object
    users[currentUser.username].profile = document.getElementById('editProfile').value;

    // Change password if filled
    const newPass = document.getElementById('editPassword').value;
    if (newPass.trim().length > 0) {
      users[currentUser.username].password = newPass;
      alert("Password changed successfully");
    }

    closeSettings();
  }

  function showPage(pageId) {
    document.getElementById('dashboardView').style.display = 'none';
    document.getElementById('pageBuilder').style.display = 'none';

    if(pageId === 'dashboardView') {
      document.getElementById('dashboardView').style.display = 'block';
    } else if(pageId === 'pageBuilder') {
      if(currentUser.username === 'Alpha Dylan') {
        document.getElementById('pageBuilder').style.display = 'block';
      }
    }
  }

  function showPageBuilder() {
    if(currentUser.username === 'Alpha Dylan') {
      document.getElementById('pageBuilder').style.display = 'block';
      document.getElementById('dashboardView').style.display = 'none';
    }
  }

  function addSection() {
    const container = document.getElementById('editableSections');
    const newSection = document.createElement('div');
    newSection.className = 'section';
    newSection.contentEditable = 'true';
    newSection.textContent = 'New editable section';
    container.appendChild(newSection);
  }

  function saveChanges(scope) {
    // For demo, we just alert saving scope (all or current user)
    alert(`Saved changes to ${scope === 'all' ? 'everyone' : currentUser.username}'s view`);
  }

  function sendChat() {
    const input = document.getElementById('chatInput');
    if(!input.value.trim()) return;
    const log = document.getElementById('chatLog');
    const message = document.createElement('div');
    message.textContent = `You: ${input.value}`;
    log.appendChild(message);
    log.scrollTop = log.scrollHeight;
    input.value = '';

    // Fake Dom reply after delay
    setTimeout(() => {
      const reply = document.createElement('div');
      reply.textContent = "Dom: Good boy. Keep it up.";
      log.appendChild(reply);
      log.scrollTop = log.scrollHeight;
    }, 1000);
  }
</script>

</body>
</html>

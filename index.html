<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fag Hub Dashboard</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: white;
    }
    .login-container, .dashboard {
      display: none;
      padding: 20px;
    }
    .login-container.active, .dashboard.active {
      display: block;
    }
    .sidebar {
      height: 100vh;
      width: 200px;
      position: fixed;
      background-color: #1e1e1e;
      padding-top: 20px;
      display: none;
    }
    .sidebar.active {
      display: block;
    }
    .sidebar a {
      display: block;
      padding: 10px 15px;
      color: #ff69b4;
      text-decoration: none;
    }
    .sidebar a:hover {
      background-color: #333;
    }
    #main {
      margin-left: 200px;
      padding: 20px;
    }
    .message, .profile, .chatbox, .settings-popup {
      margin-bottom: 20px;
      background-color: #1e1e1e;
      padding: 15px;
      border-radius: 5px;
    }
    .chat-log {
      max-height: 150px;
      overflow-y: auto;
      background-color: #2c2c2c;
      padding: 10px;
      border-radius: 5px;
    }
    .settings-popup {
      display: none;
      position: fixed;
      top: 20%;
      left: 30%;
      width: 40%;
      background-color: #1e1e1e;
      z-index: 1000;
      border: 1px solid #ff69b4;
    }
    .settings-popup textarea {
      width: 100%;
      height: 100px;
      background-color: #2c2c2c;
      color: white;
      border: none;
      padding: 10px;
    }
    .canvas-builder {
      display: none;
      margin-top: 20px;
    }
    .canvas-builder.active {
      display: block;
    }
  </style>
</head>
<body>

  <div class="login-container active" id="loginContainer">
    <h2>Login to Fag Hub</h2>
    <input type="text" id="username" placeholder="Username"/><br/><br/>
    <input type="password" id="password" placeholder="Password"/><br/><br/>
    <button onclick="login()">Login</button>
  </div>

  <div class="sidebar" id="sidebar"></div>

  <div id="main" class="dashboard">
    <div class="message" id="dailyMessage"></div>
    <div class="profile" id="profile"></div>
    <div class="chatbox">
      <h3>Chat</h3>
      <div class="chat-log" id="chatLog"></div>
      <input type="text" id="chatInput" placeholder="Say something..."/>
      <button onclick="sendMessage()">Send</button>
    </div>
    <div class="settings-popup" id="settingsPopup">
      <h3>Edit Settings</h3>
      <textarea id="settingsEditor"></textarea><br/>
      <button onclick="saveSettings()">Save to Specific Account</button>
      <button onclick="saveSettings(true)">Save to All Accounts</button>
      <button onclick="closeSettings()">Close</button>
    </div>
    <div class="canvas-builder" id="builderCanvas">
      <h3>Page Builder</h3>
      <div id="builderArea" contenteditable="true" style="background:#2c2c2c;padding:10px;border-radius:5px;">Edit this live area...</div>
      <br/>
      <button onclick="saveBuilder()">Save to Specific Account</button>
      <button onclick="saveBuilder(true)">Save to All Accounts</button>
    </div>
  </div>

  <script>
    const users = {
      "Alpha Dylan": { password: "alphapass", debt: "$0", profile: "Alpha Master", role: "alpha" },
      "Andrew": { password: "andrewpass", debt: "$500", profile: "Good sub", role: "sub" }
    };

    let currentUser = null;

    const dailyMessages = [
      "You exist to serve your Alpha.",
      "Remember your place today.",
      "Obedience is your only purpose."
    ];

    function login() {
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      if (users[username] && users[username].password === password) {
        currentUser = username;
        showDashboard();
      } else {
        alert("Invalid credentials.");
      }
    }

    function showDashboard() {
      document.getElementById("loginContainer").classList.remove("active");
      document.querySelector(".dashboard").classList.add("active");
      document.getElementById("sidebar").classList.add("active");
      document.getElementById("dailyMessage").innerText = dailyMessages[Math.floor(Math.random() * dailyMessages.length)];
      document.getElementById("profile").innerHTML = `<strong>Debt:</strong> ${users[currentUser].debt}<br/><strong>Profile:</strong> ${users[currentUser].profile}`;
      renderSidebar();
      loadBuilderContent();
    }

    function renderSidebar() {
      const sidebar = document.getElementById("sidebar");
      sidebar.innerHTML = `
        <a href="#" onclick="showSection('dashboard')">Dashboard</a>
        <a href="#" onclick="openSettings()">Settings</a>
        <a href="#" onclick="alert('Feature coming soon.')">Submit Debt</a>
        ${users[currentUser].role === "alpha" ? '<a href="#" onclick="toggleBuilder()">Page Builder</a>' : ''}
        <a href="#" onclick="logout()">Logout</a>
      `;
    }

    function sendMessage() {
      const input = document.getElementById("chatInput");
      const log = document.getElementById("chatLog");
      const msg = input.value.trim();
      if (msg) {
        const reply = users[currentUser].role === "alpha"
          ? "Sub, your message is received."
          : "Yes, Sir. I'll remember that.";
        log.innerHTML += `<div><strong>You:</strong> ${msg}</div>`;
        log.innerHTML += `<div><strong>DomBot:</strong> ${reply}</div>`;
        input.value = "";
        log.scrollTop = log.scrollHeight;
      }
    }

    function openSettings() {
      document.getElementById("settingsPopup").style.display = "block";
      document.getElementById("settingsEditor").value = "Live editable settings for this session.";
    }

    function closeSettings() {
      document.getElementById("settingsPopup").style.display = "none";
    }

    function saveSettings(toAll = false) {
      alert(toAll ? "Saved to all accounts." : `Saved to ${currentUser}'s account.`);
      closeSettings();
    }

    function toggleBuilder() {
      const builder = document.getElementById("builderCanvas");
      builder.classList.toggle("active");
    }

    function saveBuilder(toAll = false) {
      const content = document.getElementById("builderArea").innerHTML;
      if (toAll) {
        localStorage.setItem("builder_global", content);
        alert("Builder content saved for all accounts.");
      } else {
        localStorage.setItem(`builder_${currentUser}`, content);
        alert(`Builder content saved for ${currentUser}.`);
      }
    }

    function loadBuilderContent() {
      const userContent = localStorage.getItem(`builder_${currentUser}`);
      const globalContent = localStorage.getItem("builder_global");
      const builderArea = document.getElementById("builderArea");
      builderArea.innerHTML = userContent || globalContent || "Edit this live area...";
    }

    function logout() {
      location.reload();
    }
  </script>

</body>
</html>
